// ==========================================================================
// Modern Admin CSS - Card & Box Overrides
// ==========================================================================
// Material Design 3 inspired card and container styles
// ==========================================================================

// ==========================================================================
// Postbox (Meta Boxes) - MD3 Filled Card
// ==========================================================================

.postbox {
    border: 1px solid var(--mac-outline-variant);
    border-radius: var(--mac-radius-lg);
    box-shadow: none;
    background-color: var(--mac-surface);
}

.postbox .postbox-header {
    border-bottom: 1px solid var(--mac-outline-variant);
    background-color: var(--mac-surface-container-low);
}

.postbox .postbox-header h2,
.postbox .hndle {
    color: var(--mac-text-primary);
    font-weight: 500;
}

.postbox .inside {
    color: var(--mac-text-secondary);
}

.postbox .handle-actions button {
    color: var(--mac-text-muted);
    border-radius: var(--mac-radius-full);
    transition: background-color var(--mac-transition);
}

.postbox .handle-actions button:hover {
    color: var(--mac-text-primary);
    background-color: var(--mac-state-hover);
}

.postbox .handle-actions button:focus {
    color: var(--mac-text-primary);
    background-color: var(--mac-state-focus);
    outline: none;
}

// ==========================================================================
// Dashboard Widgets
// ==========================================================================

#dashboard-widgets .postbox {
    border-color: var(--mac-outline-variant);
}

#dashboard-widgets .postbox .postbox-header {
    background-color: var(--mac-surface-container-low);
}

// ==========================================================================
// Welcome Panel - MD3 Elevated Card
// ==========================================================================

.welcome-panel {
    border: 1px solid var(--mac-outline-variant);
    border-radius: var(--mac-radius-lg);
    box-shadow: none;
    background-color: var(--mac-surface-container-low);
}

// Welcome Panel Close/Dismiss Button - Improved Accessibility
.welcome-panel .welcome-panel-close {
    color: var(--mac-on-surface);
    background-color: var(--mac-surface-container);
    border: 1px solid var(--mac-outline);
    border-radius: var(--mac-radius-sm);
    padding: 8px 12px 8px 28px;
    font-size: 13px;
    font-weight: 500;
    text-decoration: none;
    transition: background-color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
    z-index: 10;

    &::before {
        color: var(--mac-on-surface);
        top: 6px;
    }

    &:hover,
    &:hover::before {
        color: var(--mac-on-surface);
        background-color: var(--mac-state-hover);
        border-color: var(--mac-outline);
    }

    &:focus,
    &:focus::before {
        color: var(--mac-on-surface);
        background-color: var(--mac-surface-container);
        border-color: var(--mac-primary);
        box-shadow: var(--mac-shadow-focus);
        outline: 2px solid transparent;
        outline-offset: 2px;
    }

    &:active,
    &:active::before {
        color: var(--mac-on-surface);
        background-color: var(--mac-state-pressed);
    }
}

// Welcome Panel Header - Text on dark background image
.welcome-panel .welcome-panel-header {
    h2 {
        color: #fff !important;
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        font-size: 32px;
        font-weight: 400;
        line-height: 1.3;
    }

    p {
        color: rgba(255, 255, 255, 0.95);
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        font-size: 18px;
    }

    a {
        color: #fff;
        text-decoration: underline;
        text-underline-offset: 3px;
        text-decoration-color: rgba(255, 255, 255, 0.7);

        &:hover {
            color: #fff;
            text-decoration-color: #fff;
            text-decoration-thickness: 2px;
        }

        &:focus {
            color: #fff;
            outline: 2px solid #fff;
            outline-offset: 3px;
            border-radius: 3px;
            background-color: rgba(255, 255, 255, 0.1);
        }
    }
}

// Welcome Panel body h2 (outside header)
.welcome-panel .welcome-panel-column-content h3,
.welcome-panel h2:not(.welcome-panel-header h2) {
    color: var(--mac-text-primary);
    font-weight: 500;
}

.welcome-panel p {
    color: var(--mac-text-secondary);
}

// Welcome Panel Column Container
.welcome-panel .welcome-panel-column-container {
    background-color: var(--mac-surface);
    border-top: 1px solid var(--mac-outline-variant);
}

.welcome-panel .welcome-panel-column-content {
    color: var(--mac-text-secondary);

    h3 {
        color: var(--mac-text-primary);
        font-weight: 500;
        margin-bottom: 8px;
    }

    p {
        color: var(--mac-text-secondary);
        line-height: 1.5;
    }

    a {
        color: var(--mac-primary);
        font-weight: 500;
        text-decoration: none;
        display: inline-block;
        margin-top: 8px;

        &:hover {
            color: var(--mac-primary-hover);
            text-decoration: underline;
        }

        &:focus {
            color: var(--mac-primary);
            outline: 2px solid var(--mac-primary);
            outline-offset: 2px;
            border-radius: 2px;
        }
    }
}

// Welcome Panel SVG Icons - Ensure visibility
.welcome-panel-column > svg {
    rect {
        fill: var(--mac-primary);
    }
}

// ==========================================================================
// At a Glance
// ==========================================================================

#dashboard_right_now .main h3,
#dashboard_right_now .main h4 {
    color: var(--mac-text-primary);
}

#dashboard_right_now li a {
    color: var(--mac-primary);
}

#dashboard_right_now li a:hover {
    color: var(--mac-primary-hover);
}

// ==========================================================================
// Activity Widget
// ==========================================================================

#dashboard_activity .subsubsub a {
    color: var(--mac-primary);
}

#dashboard_activity .subsubsub .current {
    color: var(--mac-text-primary);
}

// ==========================================================================
// Site Health
// ==========================================================================

.site-health-issues-wrapper .health-check-accordion-trigger {
    color: var(--mac-text-primary);
}

.site-health-issues-wrapper .health-check-accordion-trigger:hover {
    background-color: var(--mac-state-hover);
}

.health-check-status-good {
    border-color: var(--mac-success);
}

.health-check-status-recommended {
    border-color: var(--mac-warning);
}

.health-check-status-critical {
    border-color: var(--mac-danger);
}

// ==========================================================================
// Card Pattern (Themes, Plugins) - MD3 Outlined Card
// ==========================================================================

.plugin-card,
.theme-browser .theme {
    border: 1px solid var(--mac-outline-variant);
    border-radius: var(--mac-radius-lg);
    box-shadow: none;
    background-color: var(--mac-surface);
    transition: background-color var(--mac-transition), border-color var(--mac-transition);
}

.plugin-card:hover,
.theme-browser .theme:hover {
    border-color: var(--mac-outline);
    background-color: var(--mac-surface-container-lowest);
}

.plugin-card .plugin-card-top {
    border-bottom: 1px solid var(--mac-outline-variant);
}

.plugin-card .name h3 {
    color: var(--mac-text-primary);
    font-weight: 500;
}

.plugin-card .desc p {
    color: var(--mac-text-secondary);
}
